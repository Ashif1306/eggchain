<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EggChain - Analisis Kesehatan Peternakan</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="monitoring-style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Mobile Menu Button -->
        <button class="hamburger" id="hamburgerBtn">
            <i class="fas fa-bars"></i>
        </button>
        
        <!-- Mobile Header with User Profile -->
        <div class="mobile-header">
            <div class="mobile-user-profile">
                <img src="img/user-avatar.jpg" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                    <span class="user-name">Tam Tran</span>
                    <span class="user-status">Free account</span>
                </div>
            </div>
        </div>
        
        <!-- Overlay for sidebar on mobile -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Close Menu Button for Mobile -->
            <button class="close-menu" id="closeMenu">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Logo -->
            <div class="logo">
                <img src="img/logo eggchain.png" alt="EggChain Logo" class="logo-img">
            </div>
            
            <!-- Admin Tools Section -->
            <div class="admin-tools">
                <span class="section-title">Admin tools</span>
                
                <nav class="nav-menu">
                    <a href="#" class="nav-item">
                        <i class="fas fa-th-large"></i>
                        <span>Overview</span>
                    </a>
                    <a href="#" class="nav-item active">
                        <i class="fas fa-heartbeat"></i>
                        <span>Analisis Kesehatan</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-box"></i>
                        <span>Products</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-bullhorn"></i>
                        <span>Campaigns</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-calendar"></i>
                        <span>Schedules</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-wallet"></i>
                        <span>Payouts</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-file-alt"></i>
                        <span>Statement</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </nav>
            </div>
            
            <!-- Insights Section -->
            <div class="insights">
                <span class="section-title">Insights</span>
                
                <nav class="nav-menu">
                    <a href="#" class="nav-item">
                        <i class="fas fa-envelope"></i>
                        <span>Inbox</span>
                        <span class="badge">18</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-bell"></i>
                        <span>Notifications</span>
                        <span class="badge">2</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-comment"></i>
                        <span>Comments</span>
                        <span class="badge">20</span>
                    </a>
                </nav>
            </div>
            
            <!-- User Profile - at bottom of sidebar -->
            <div class="user-profile">
                <img src="img/user-avatar.jpg" alt="User Avatar" class="user-avatar">
                <div class="user-info">
                    <span class="user-name">Tam Tran</span>
                    <span class="user-status">Free account</span>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1>Hi Mandiri Jaya Farm,</h1>
                    <h2>Analisis Kesehatan Peternakan <span class="wave">ðŸ‘‹</span></h2>
                </div>
                <div class="header-right">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search">
                    </div>
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">2</span>
                    </div>
                </div>
            </header>
            
            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <button class="tab active">
                    <i class="fas fa-heartbeat"></i>
                    Analisis Kesehatan
                </button>
                <button class="tab">
                    <i class="fas fa-chart-line"></i>
                    Sales
                </button>
                <button class="tab">
                    <i class="fas fa-eye"></i>
                    Overview
                </button>
                <button class="tab">
                    <i class="fas fa-egg"></i>
                    Produksi
                </button>
            </div>
            
            <!-- Date Selector -->
            <div class="date-selector">
                <span>27 April 2025</span>
            </div>
            
            <!-- Farm Information Card -->
            <div class="info-card">
                <div class="farm-info">
                    <h3>Informasi Peternakan</h3>
                    <div class="info-details">
                        <div>
                            <span>Peternakan mandiri jaya<br>ID : FARM123456</span>
                        </div>
                        <div>
                            <span>Lokasi : Kota Makassar,<br>Sulawesi Selatan</span>
                        </div>
                    </div>
                </div>
                <div class="coop-selector">
                    <h3>Pilih Kandang</h3>
                    <div class="coop-buttons">
                        <button class="coop-btn active">COOP - A</button>
                        <button class="coop-btn">COOP-B</button>
                        <button class="coop-btn">COOP-C</button>
                    </div>
                </div>
            </div>
                        <!-- Tambahkan ini di bagian atas input form, sebelum form input lainnya -->
            <div class="csv-import-section">
                <h3>Import Data</h3>
                <p>Upload file CSV dengan data kesehatan peternakan atau isi form secara manual.</p>
                
                <div class="csv-upload">
                    <label for="csvFile" class="csv-upload-label">
                        <i class="fas fa-file-csv"></i>
                        <span>Pilih File CSV</span>
                    </label>
                    <input type="file" id="csvFile" accept=".csv" style="display:none;">
                    <span id="fileName" class="file-name">Belum ada file yang dipilih</span>
                </div>
                
                <div class="csv-template">
                    <a href="#" id="downloadTemplate" class="download-template">
                        <i class="fas fa-download"></i>
                        Download Template CSV
                    </a>
                    <button type="button" class="btn btn-secondary btn-sm" id="previewDataBtn" disabled>
                        <i class="fas fa-eye"></i>
                        Preview Data
                    </button>
                </div>
            </div>

            <!-- Preview Modal -->
            <div id="previewModal" class="preview-modal">
                <div class="preview-content">
                    <span class="close-preview">&times;</span>
                    <h4>Preview Data CSV</h4>
                    <div class="preview-table-container">
                        <table id="previewTable" class="preview-table"></table>
                    </div>
                    <div class="preview-actions">
                        <button type="button" class="btn btn-secondary" id="closePreviewBtn">Tutup</button>
                        <button type="button" class="btn btn-primary" id="importDataBtn">Import Data</button>
                    </div>
                </div>
            </div>
            <!-- Input Form -->
            <div class="input-form">
                <h3>Data Input Analisis Kesehatan</h3>
                <form id="healthAnalysisForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="temperature">Suhu Kandang (Â°C)</label>
                            <input type="number" id="temperature" name="temperature" min="20" max="35" step="0.1" value="25.5" required>
                        </div>
                        <div class="form-group">
                            <label for="humidity">Kelembapan (%)</label>
                            <input type="number" id="humidity" name="humidity" min="40" max="90" step="1" value="65" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ammonia">Kadar Amonia (ppm)</label>
                            <input type="number" id="ammonia" name="ammonia" min="0" max="50" step="1" value="15" required>
                        </div>
                        <div class="form-group">
                            <label for="noise">Tingkat Kebisingan (dB)</label>
                            <input type="number" id="noise" name="noise" min="30" max="90" step="1" value="45" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lighting">Durasi Pencahayaan (jam)</label>
                            <input type="number" id="lighting" name="lighting" min="8" max="24" step="1" value="16" required>
                        </div>
                        <div class="form-group">
                            <label for="flockAge">Umur Flock (hari)</label>
                            <input type="number" id="flockAge" name="flockAge" min="1" max="1000" step="1" value="224" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="featherCondition">Kondisi Bulu</label>
                            <select id="featherCondition" name="featherCondition" required>
                                <option value="Sangat Baik">Sangat Baik</option>
                                <option value="Baik" selected>Baik</option>
                                <option value="Cukup">Cukup</option>
                                <option value="Buruk">Buruk</option>
                                <option value="Sangat Buruk">Sangat Buruk</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="combCondition">Kondisi Jengger</label>
                            <select id="combCondition" name="combCondition" required>
                                <option value="Sangat Merah">Sangat Merah</option>
                                <option value="Merah Terang" selected>Merah Terang</option>
                                <option value="Merah">Merah</option>
                                <option value="Merah Pucat">Merah Pucat</option>
                                <option value="Pucat">Pucat</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mortality">Tingkat Kematian (%)</label>
                            <input type="number" id="mortality" name="mortality" min="0" max="100" step="0.01" value="0" required>
                        </div>
                        <div class="form-group">
                            <label for="feedConsumption">Konsumsi Pakan (g/ayam/hari)</label>
                            <input type="number" id="feedConsumption" name="feedConsumption" min="50" max="200" step="0.1" value="110" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="waterConsumption">Konsumsi Air (ml/ayam/hari)</label>
                            <input type="number" id="waterConsumption" name="waterConsumption" min="100" max="500" step="1" value="220" required>
                        </div>
                        <div class="form-group">
                            <label for="eggProduction">Produksi Telur (%)</label>
                            <input type="number" id="eggProduction" name="eggProduction" min="0" max="100" step="0.1" value="85.5" required>
                        </div>
                    </div>
                    
                    <div class="btn-container">
                        <button type="button" class="btn btn-secondary" id="resetBtn">Reset Data</button>
                        <button type="button" class="btn btn-primary" id="analyzeBtn">Analisis Kesehatan</button>
                    </div>
                </form>
            </div>
            
            <!-- Results Section (initially hidden) -->
            <div class="results-section" id="resultsSection">
                <h3>Hasil Analisis Kesehatan</h3>
                
                <div class="result-card">
                    <h4><span class="status-icon status-warning"></span> Indeks Kesehatan Keseluruhan</h4>
                    <div class="result-details">
                        <p>Skor Kesehatan: <strong>78/100</strong> (Kategori: <strong>Sedang</strong>)</p>
                        <p>Ayam dalam kondisi kesehatan sedang dengan beberapa area yang perlu perhatian. Terdapat 2 parameter yang berada di luar range optimal.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Perhatikan parameter yang menyimpang dari nilai optimal, terutama kadar amonia dan indeks stress yang meningkat. Tindakan perbaikan segera diperlukan untuk mencegah penurunan produktivitas.</p>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4><span class="status-icon status-danger"></span> Kondisi Lingkungan</h4>
                    <div class="result-details">
                        <p>Skor Lingkungan: <strong>65/100</strong> (Kategori: <strong>Perlu Perhatian</strong>)</p>
                        <p>Kadar amonia 15 ppm melebihi batas aman (10 ppm). Suhu, kelembaban, dan kebisingan dalam rentang normal.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Tingkatkan ventilasi kandang untuk mengurangi kadar amonia. Lakukan pembersihan lebih sering pada area kotoran ayam. Pertimbangkan penggunaan aditif pakan atau litter treatment untuk mengurangi produksi amonia.</p>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4><span class="status-icon status-warning"></span> Indeks Stress</h4>
                    <div class="result-details">
                        <p>Skor Stress: <strong>0.26</strong> (Kategori: <strong>Medium</strong>)</p>
                        <p>Tingkat stress pada batas atas kategori medium. Kondisi jengger menunjukkan sirkulasi darah yang baik namun ada tanda-tanda stress ringan.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Periksa sumber stress seperti perubahan suhu tiba-tiba, kepadatan kandang, atau gangguan predator. Pastikan ayam memiliki akses ke tempat berteduh dan area beraktivitas. Pertimbangkan tambahan vitamin dan elektrolit dalam air minum untuk mengurangi stress.</p>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4><span class="status-icon status-healthy"></span> Produktivitas</h4>
                    <div class="result-details">
                        <p>Skor Produktivitas: <strong>92/100</strong> (Kategori: <strong>Sangat Baik</strong>)</p>
                        <p>Produksi telur 85.5% berada di atas standar untuk ayam petelur usia 224 hari. Konsumsi pakan dan air dalam rentang normal.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Pertahankan kualitas pakan dan ketersediaan air. Pantau dengan cermat untuk memastikan produktivitas tetap tinggi. Lakukan penyesuaian pakan sesuai dengan kebutuhan nutrisi pada fase produksi ini.</p>
                    </div>
                </div>
            </div>
            
            <!-- Chart Sections (initially hidden) -->
            <div class="chart-section" id="chartSection">
                <div class="chart-card">
                    <h3>Tren Parameter Kesehatan</h3>
                    <div class="chart-container">
                        <canvas id="healthTrendsChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-card">
                    <h3>Indeks Stress vs. Produktivitas</h3>
                    <div class="chart-container">
                        <canvas id="stressProductivityChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Prediction Section (initially hidden) -->
            <div class="results-section" id="predictionSection">
                <h3>Prediksi Kesehatan & Produktivitas</h3>
                
                <div class="result-card">
                    <h4><span class="status-icon status-warning"></span> Prediksi 7 Hari Kedepan</h4>
                    <div class="result-details">
                        <p>Jika kondisi saat ini dipertahankan, indeks stress dapat meningkat hingga <strong>0.32</strong> dan produktivitas dapat menurun hingga <strong>82.1%</strong> dalam 7 hari ke depan.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Lakukan tindakan perbaikan untuk parameter kadar amonia dan stress segera. Model prediksi menunjukkan potensi kerugian produksi hingga 3.4% jika tidak ditangani.</p>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4><span class="status-icon status-healthy"></span> Potensi Optimalisasi</h4>
                    <div class="result-details">
                        <p>Dengan perbaikan pada ventilasi dan manajemen stress, produktivitas dapat ditingkatkan hingga <strong>88.2%</strong> dan skor kesehatan hingga <strong>85/100</strong>.</p>
                    </div>
                    <div class="recommendation">
                        <p><strong>Rekomendasi:</strong> Implementasikan program manajemen ventilasi yang lebih baik dan penggunaan probiotik dalam pakan untuk hasil optimal. Estimasi ROI dari investasi perbaikan ini adalah 1:3.5 dalam 30 hari.</p>
                    </div>
                </div>
            </div>
            
            <!-- IoT Status Section -->
            <div class="iot-status">
                <p>Status: Analisis berdasarkan data IoT - 7 sensor aktif mengirimkan data</p>
                <div class="iot-buttons">
                    <button class="btn-primary">Riwayat Analisis</button>
                    <button class="btn-secondary">Unduh Laporan</button>
                </div>
            </div>
        </main>
    </div>
    
    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="hasilanalisis.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
</body>
</html>